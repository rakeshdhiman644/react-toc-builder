{"version":3,"file":"index.esm.js","sources":["../src/generateToc.js","../src/TocWrapper.jsx"],"sourcesContent":["export function generateToc(contentHtml, positionAfter = 0, icon = null) {\r\n  // Default SVG icon if none provided\r\n  const defaultIcon = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" \r\n      viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" \r\n      stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n    </svg>\r\n  `;\r\n\r\n  // If icon is an image URL, render <img>, otherwise assume SVG string\r\n  const iconHtml = icon\r\n    ? icon.trim().startsWith(\"<svg\")\r\n      ? icon\r\n      : `<img src=\"${icon}\" alt=\"toggle-icon\" width=\"18\" height=\"18\" />`\r\n    : defaultIcon;\r\n\r\n  let tocHtml = `\r\n  <style>\r\n  .rtb-toc{\r\n    border: 1px solid #ddd;\r\n    padding: 10px;\r\n    margin-bottom: 1rem;\r\n    border-radius: 4px;\r\n    display: table;\r\n    box-shadow: 0 1px 1px #0000000d;\r\n  }\r\n.rtb-toc-header {\r\n    margin-bottom: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 10px;\r\n  }\r\n  </style>\r\n    <div class=\"rtb-toc\">\r\n      <div class=\"rtb-toc-header\">\r\n        <b>Table of Contents</b>\r\n        <button data-toc-toggle class=\"rtb-toggle-btn\" aria-label=\"Toggle TOC\" style=\"cursor:pointer;\">\r\n          ${iconHtml}\r\n        </button>\r\n      </div>\r\n      <ul class=\"rtb-toc-list\" style=\"display: none; list-style: none; padding: 0;\">\r\n  `;\r\n\r\n  const headingRegex = /<h([2-6])[^>]*>(.*?)<\\/h\\1>/gi;\r\n  let match;\r\n  let count = 1;\r\n  let contentWithIds = contentHtml;\r\n\r\n  while ((match = headingRegex.exec(contentHtml)) !== null) {\r\n    const tag = match[1];\r\n    const text = match[2].replace(/<[^>]+>/g, \"\").trim();\r\n    if (!text) continue;\r\n\r\n    const id = `toc-${tag}-${match.index}`;\r\n    contentWithIds = contentWithIds.replace(\r\n      match[0],\r\n      `<h${tag} id=\"${id}\">${text}</h${tag}>`\r\n    );\r\n\r\n    tocHtml += `<li class=\"rtb-toc-item\">${count}. <a href=\"#${id}\">${text}</a></li>`;\r\n    count++;\r\n  }\r\n\r\n  tocHtml += `\r\n      </ul>\r\n    </div>\r\n  `;\r\n\r\n  // ðŸ§© Insert TOC after the nth paragraph (positionAfter)\r\n  if (positionAfter >= 0) {\r\n    const paragraphRegex = /(<p[^>]*>.*?<\\/p>)/gi;\r\n    let paragraphs = [...contentWithIds.matchAll(paragraphRegex)];\r\n\r\n    if (paragraphs.length > positionAfter) {\r\n      const targetParagraph = paragraphs[positionAfter][0];\r\n      contentWithIds = contentWithIds.replace(targetParagraph, `${targetParagraph}${tocHtml}`);\r\n    } else {\r\n      contentWithIds += tocHtml;\r\n    }\r\n  } else {\r\n    contentWithIds = tocHtml + contentWithIds;\r\n  }\r\n\r\n  return contentWithIds;\r\n}\r\n","import React, { useEffect } from \"react\";\r\n\r\nexport const TocWrapper = ({ html }) => {\r\n  useEffect(() => {\r\n    const btn = document.querySelector(\".rtb-toggle-btn\");\r\n    const list = document.querySelector(\".rtb-toc-list\");\r\n    if (!btn || !list) return;\r\n\r\n    const toggle = () => {\r\n      list.style.display = list.style.display === \"none\" ? \"block\" : \"none\";\r\n    };\r\n\r\n    btn.addEventListener(\"click\", toggle);\r\n    return () => btn.removeEventListener(\"click\", toggle);\r\n  }, []);\r\n\r\n  return <div dangerouslySetInnerHTML={{ __html: html }} />;\r\n};\r\n\r\nexport default TocWrapper;\r\n"],"names":["generateToc","contentHtml","positionAfter","arguments","length","undefined","icon","defaultIcon","iconHtml","trim","startsWith","concat","tocHtml","headingRegex","match","count","contentWithIds","exec","tag","text","replace","id","index","paragraphRegex","paragraphs","_toConsumableArray","matchAll","targetParagraph","TocWrapper","_ref","html","useEffect","btn","document","querySelector","list","toggle","style","display","addEventListener","removeEventListener","React","createElement","dangerouslySetInnerHTML","__html"],"mappings":"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"}